<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Solver</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"
      integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <style> 
        input[class=field] {
          width: 35px;
          height: 35px;
          padding: 10px 10px;
          margin: 9px 0;
          box-sizing: border-box;
          font-size: medium;
          background-color: whitesmoke;
        }
    </style>
</head>
<body>
    <div>
        <h1>Sudoku Solver</h1>
    </div>


    <button id="button_9x9">9x9</button>
    <button id="button_16x16">16x16</button>
    <button id="button_25x15">25x25</button>

    <div>
        <input type="text" id="1_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="1_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="2_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="2_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="3_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="3_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="4_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="4_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="5_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="5_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="6_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="6_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="7_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="7_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="8_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="8_9" class = "field" placeholder="" maxlength="1" />
    </div>
    <div>
        <input type="text" id="9_1" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_2" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_3" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_4" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_5" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_6" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_7" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_8" class = "field" placeholder="" maxlength="1" />
        <input type="text" id="9_9" class = "field" placeholder="" maxlength="1" />
    </div>

    <button id="button_solve">Solve</button>
    <button id="button_clean">Clean</button>
    <button id="button_load">Preset</button>
    <button id="button_copy">Copy</button>

    <p>
        For more details please check the project on <a href="https://github.com/felipecacique/SudokuSolver">Github</a>. <br>
        You can contact me on felipecacique2@hotmail.com. <br>
        Author: Felipe Vital Cacique. <br>
        @2023
    </p>

    <script type="text/javascript">
        $("#button_solve").on("click", function() {
            console.log("clicou no botao solve")

            // create sudoku using the values from the grid
            sudoku = {}
            for (let j=1; j<=9; j++){
                let row = []
                for (let i=1; i<=9; i++){
                    row.push($("#"+j.toString()+"_"+i.toString()).val())
                }
                sudoku[j.toString()] = row
            }
            
            console.log(sudoku)

            console.log("Calling function")

            // we need to use .ajax to access our route from python
            $.ajax({
                type : "PUT",
                url : '/sudoku/solve',
                dataType: "json",
                data: JSON.stringify(sudoku),
                contentType: 'application/json;charset=UTF-8',
                success: function (data) {
                    // data is json sent by the server
                    console.log("successfull")
                    console.log(data);
                    
                    // it will fill the grid with the solved sudoku
                    for (let i=1; i<=9; i++){
                        for (let j=1; j<=9; j++){
                            $("#"+j.toString()+"_"+i.toString()).val(data[j.toString()][i-1]);
                        }
                    }

                    }
                });
            console.log("End calling")
            console.log(sudoku)
        });

        $("#button_clean").on("click", function() {
            // clean grid
            console.log("clicou no botao clean")
            for (let i=1; i<=9; i++){
                for (let j=1; j<=9; j++){
                    $("#"+j.toString()+"_"+i.toString()).val("");
                }
            }
        });

        $("#button_copy").on("click", function() {
            // copy grid to clipboard
            console.log("clicou no botao copy")
            // create sudoku using the values from the grid
            sudoku = {}
            for (let j=1; j<=9; j++){
                let row = []
                for (let i=1; i<=9; i++){
                    row.push($("#"+j.toString()+"_"+i.toString()).val())
                }
                sudoku[j.toString()] = row
            }
            navigator.clipboard.writeText(JSON.stringify(sudoku))
        });

        $("#button_load").on("click", function() {
            // load a random usolved sudoku
            console.log("clicou no botao load")
            
            
            sudoku_exemple = {
                "1": [
                    "",
                    "",
                    "3",
                    "",
                    "2",
                    "",
                    "6",
                    "",
                    ""
                ],
                "2": [
                    "9",
                    "",
                    "",
                    "3",
                    "",
                    "5",
                    "",
                    "",
                    "1"
                ],
                "3": [
                    "",
                    "",
                    "1",
                    "8",
                    "",
                    "6",
                    "4",
                    "",
                    ""
                ],
                "4": [
                    "",
                    "",
                    "8",
                    "1",
                    "",
                    "2",
                    "9",
                    "",
                    ""
                ],
                "5": [
                    "7",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "8"
                ],
                "6": [
                    "",
                    "",
                    "6",
                    "7",
                    "",
                    "8",
                    "2",
                    "",
                    ""
                ],
                "7": [
                    "",
                    "",
                    "2",
                    "6",
                    "",
                    "9",
                    "5",
                    "",
                    ""
                ],
                "8": [
                    "8",
                    "",
                    "",
                    "2",
                    "",
                    "3",
                    "",
                    "",
                    "9"
                ],
                "9": [
                    "",
                    "",
                    "5",
                    "",
                    "1",
                    "",
                    "3",
                    "",
                    ""
                ]
            }

            for (let i=1; i<=9; i++){
                for (let j=1; j<=9; j++){
                    $("#"+j.toString()+"_"+i.toString()).val(sudoku_exemple[j.toString()][i-1]);
                }
            }          

        });

    </script>

</body>
</html>